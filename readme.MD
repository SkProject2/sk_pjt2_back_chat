# Re:Use Chat Service

> ì‹¤ì‹œê°„ ì¤‘ê³ ê±°ë˜ í”Œë«í¼ì„ ìœ„í•œ WebSocket(STOMP) ê¸°ë°˜ ì±„íŒ… ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤

## ğŸš€ Overview

Re:Use ì¤‘ê³ ê±°ë˜ í”Œë«í¼ì˜ í•µì‹¬ ì±„íŒ… ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. WebSocketê³¼ STOMP í”„ë¡œí† ì½œì„ í™œìš©í•œ ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹ ì„ ì œê³µí•˜ë©°, Kafkaë¥¼ í†µí•œ í™•ì¥ ê°€ëŠ¥í•œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ë¡œ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.

### âœ¨ Key Features

- **ğŸ”„ ì‹¤ì‹œê°„ ì±„íŒ…**: WebSocket + STOMP ê¸°ë°˜ ì¦‰ì„ ë©”ì‹œì§•
- **ğŸ“± 1:1 ì±„íŒ…ë°©**: êµ¬ë§¤ì-íŒë§¤ì ê°„ ê°œë³„ ì±„íŒ…ë°© ìë™ ìƒì„±
- **ğŸ’¾ ì±„íŒ… íˆìŠ¤í† ë¦¬**: MySQL ê¸°ë°˜ ì±„íŒ… ê¸°ë¡ ì˜êµ¬ ì €ì¥
- **âš¡ ì„¸ì…˜ ê´€ë¦¬**: Redisë¥¼ í™œìš©í•œ ì‹¤ì‹œê°„ ì‚¬ìš©ì ì„¸ì…˜ ì¶”ì 
- **ğŸ”— í™•ì¥ì„±**: Kafka ê¸°ë°˜ ë©€í‹° ì„œë²„ ë©”ì‹œì§€ ë™ê¸°í™”
- **ğŸ“§ ë¬¸ì˜ ê¸°ëŠ¥**: JavaMailì„ í†µí•œ ê³ ê° ë¬¸ì˜ ì²˜ë¦¬

---

## ğŸ› ï¸ Tech Stack

### Backend
- **Java 17** - Core Language
- **Spring Boot 3.4.2** - Application Framework
- **Spring WebSocket & STOMP** - Real-time Communication
- **Spring Security** - Security Layer
- **Spring Data JPA** - Data Access

### Infrastructure
- **MySQL** - Chat History & Room Management
- **Redis** - Session Store & Caching
- **Apache Kafka** - Message Queue & Inter-service Communication
- **Docker Compose** - Development Environment

### DevOps
- **GitHub Actions** - CI/CD Pipeline
- **AWS EC2** - Production Deployment
- **Gradle** - Build & Dependency Management

### Backend
- **Java 17** - Core Language
- **Spring Boot 3.4.2** - Application Framework
- **Spring WebSocket & STOMP** - Real-time Communication
- **Spring Security** - Security Layer
- **Spring Data JPA** - Data Access

### Infrastructure
- **MySQL** - Chat History & Room Management
- **Redis** - Session Store & Caching
- **Apache Kafka** - Message Queue & Inter-service Communication
- **Docker Compose** - Development Environment

### DevOps
- **GitHub Actions** - CI/CD Pipeline
- **AWS EC2** - Production Deployment
- **Gradle** - Build & Dependency Management

---

## ğŸ—‚ï¸ Project Structure

```
src/main/java/com/example/sk_pjt2_back_chat/
â”œâ”€â”€ ğŸ“ config/           # ì„¤ì • íŒŒì¼ë“¤
â”‚   â”œâ”€â”€ SecurityConfig.java
â”‚   â”œâ”€â”€ WebSocketConfig.java
â”‚   â””â”€â”€ RedisConfig.java
â”œâ”€â”€ ğŸ“ controller/       # REST & WebSocket ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”œâ”€â”€ ChatController.java
â”‚   â”œâ”€â”€ RoomController.java
â”‚   â””â”€â”€ InquiryController.java
â”œâ”€â”€ ğŸ“ service/          # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ ChatService.java
â”‚   â”œâ”€â”€ RoomService.java
â”‚   â””â”€â”€ UserSessionService.java
â”œâ”€â”€ ğŸ“ entity/           # JPA ì—”í‹°í‹°
â”‚   â”œâ”€â”€ Chat.java
â”‚   â”œâ”€â”€ Room.java
â”‚   â””â”€â”€ RoomUser.java
â”œâ”€â”€ ğŸ“ dto/              # ë°ì´í„° ì „ì†¡ ê°ì²´
â”œâ”€â”€ ğŸ“ repository/       # ë°ì´í„° ì•¡ì„¸ìŠ¤ ê³„ì¸µ
â””â”€â”€ ğŸ“ interceptor/      # STOMP ì¸í„°ì…‰í„°
```
---
## ğŸ”„ Message Flow

1. **ì±„íŒ…ë°© ìƒì„±** â†’ êµ¬ë§¤ìê°€ ìƒí’ˆì— ëŒ€í•´ íŒë§¤ìì™€ ì±„íŒ… ì‹œì‘
2. **WebSocket ì—°ê²°** â†’ í´ë¼ì´ì–¸íŠ¸ê°€ `/ws-stomp` ì—”ë“œí¬ì¸íŠ¸ë¡œ ì—°ê²°
3. **ë°© êµ¬ë…** â†’ `/sub/chat/room/{roomUUID}` í† í”½ êµ¬ë…
4. **ë©”ì‹œì§€ ì „ì†¡** â†’ `/pub/room/{roomUUID}/message`ë¡œ ë©”ì‹œì§€ ë°œí–‰
5. **Kafka ë¸Œë¡œë“œìºìŠ¤íŠ¸** â†’ ë©”ì‹œì§€ê°€ ëª¨ë“  ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ë¡œ ì „íŒŒ
6. **ì‹¤ì‹œê°„ ìˆ˜ì‹ ** â†’ êµ¬ë… ì¤‘ì¸ í´ë¼ì´ì–¸íŠ¸ë“¤ì´ ì¦‰ì‹œ ë©”ì‹œì§€ ìˆ˜ì‹ 
7. **ì˜êµ¬ ì €ì¥** â†’ MySQLì— ì±„íŒ… íˆìŠ¤í† ë¦¬ ì €ì¥